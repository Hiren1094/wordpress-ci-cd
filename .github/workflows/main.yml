on:
 push:
   branches:
     - main
name: ðŸš€ Deploy website on push
jobs:
 web-deploy:
   name: ðŸŽ‰ Deploy
   runs-on: ubuntu-latest
   steps:
   - name: ðŸšš Get the latest code
     uses: actions/checkout@v2.3.4
  
   - name: ðŸ“‚ SFTP Deploy
     id: upload
     uses: Creepios/sftp-action@v1.0.3
     with:
       host: ${{ secrets.FTP_HOST }}
       username: ${{ secrets.FTP_USERNAME }}
       password: ${{ secrets.FTP_PASSWORD }}
       localPath: './'
       remotePath: '/var/www/html'

    - name: Delete files when any files deleted
      uses: StephanThierry/ftp-delete-action@/v2.1
      with:
        host: ${{ secrets.FTP_HOST }}
        user: ${{ secrets.FTP_USERNAME }}
        password: ${{ secrets.FTP_PASSWORD }}
        remoteFiles: "precache-manifest.*.js;logs/*.log;*.php;*.html;*.txt"
        remoteDirectories: "/var/www/html"
        workingDir: "./"
        ignoreSSL: "1"
      